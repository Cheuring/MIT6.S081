#include "types.h"

struct symtable_entry {
  uint64 addr;
  char *name;
};

struct symtable_entry symbols[] = {
  {0x0000000080000000, "_entry"},
  {0x000000008000001c, "kfree"},
  {0x0000000080000092, "freerange"},
  {0x00000000800000de, "kinit"},
  {0x000000008000011a, "kalloc"},
  {0x000000008000017a, "memset"},
  {0x000000008000019c, "memcmp"},
  {0x00000000800001d6, "memmove"},
  {0x0000000080000232, "memcpy"},
  {0x000000008000024a, "strncmp"},
  {0x0000000080000286, "strncpy"},
  {0x00000000800002c4, "safestrcpy"},
  {0x00000000800002f6, "strlen"},
  {0x0000000080000320, "main"},
  {0x0000000080000436, "kvminithart"},
  {0x000000008000045a, "walk"},
  {0x0000000080000500, "walkaddr"},
  {0x0000000080000542, "mappages"},
  {0x00000000800005e2, "kvmmap"},
  {0x0000000080000612, "kvmmake"},
  {0x00000000800006e8, "kvminit"},
  {0x0000000080000708, "uvmunmap"},
  {0x00000000800007cc, "uvmcreate"},
  {0x00000000800007fa, "uvminit"},
  {0x000000008000086c, "uvmdealloc"},
  {0x00000000800008b4, "uvmalloc"},
  {0x000000008000095e, "freewalk"},
  {0x00000000800009ca, "uvmfree"},
  {0x0000000080000a04, "uvmcopy"},
  {0x0000000080000ad6, "uvmclear"},
  {0x0000000080000b08, "copyout"},
  {0x0000000080000b94, "copyin"},
  {0x0000000080000c22, "copyinstr"},
  {0x0000000080000cd2, "proc_mapstacks"},
  {0x0000000080000d68, "procinit"},
  {0x0000000080000e18, "cpuid"},
  {0x0000000080000e28, "mycpu"},
  {0x0000000080000e44, "myproc"},
  {0x0000000080000e7c, "forkret"},
  {0x0000000080000ec2, "allocpid"},
  {0x0000000080000f08, "proc_pagetable"},
  {0x0000000080000fa4, "proc_freepagetable"},
  {0x0000000080001120, "userinit"},
  {0x00000000800011a2, "growproc"},
  {0x000000008000121a, "fork"},
  {0x000000008000135a, "scheduler"},
  {0x00000000800013fa, "sched"},
  {0x00000000800014d0, "yield"},
  {0x000000008000150c, "sleep"},
  {0x0000000080001570, "wait"},
  {0x0000000080001698, "wakeup"},
  {0x000000008000170e, "reparent"},
  {0x0000000080001768, "exit"},
  {0x000000008000183e, "kill"},
  {0x00000000800018b0, "either_copyout"},
  {0x0000000080001906, "either_copyin"},
  {0x000000008000195c, "procdump"},
  {0x0000000080001a0c, "swtch"},
  {0x0000000080001a76, "trapinit"},
  {0x0000000080001a9e, "trapinithart"},
  {0x0000000080001ab6, "usertrapret"},
  {0x0000000080001b54, "clockintr"},
  {0x0000000080001b9a, "devintr"},
  {0x0000000080001c3c, "usertrap"},
  {0x0000000080001d72, "kerneltrap"},
  {0x0000000080001ea6, "fetchaddr"},
  {0x0000000080001ef8, "fetchstr"},
  {0x0000000080001f40, "argint"},
  {0x0000000080001f62, "argaddr"},
  {0x0000000080001f84, "argstr"},
  {0x0000000080001fb4, "syscall"},
  {0x0000000080002020, "sys_exit"},
  {0x0000000080002054, "sys_getpid"},
  {0x000000008000206e, "sys_fork"},
  {0x0000000080002086, "sys_wait"},
  {0x00000000800020b8, "sys_sbrk"},
  {0x0000000080002102, "sys_sleep"},
  {0x00000000800021b6, "sys_kill"},
  {0x00000000800021e8, "sys_uptime"},
  {0x000000008000222a, "sys_sigalarm"},
  {0x0000000080002282, "sys_sigreturn"},
  {0x00000000800022b8, "binit"},
  {0x0000000080002346, "bread"},
  {0x0000000080002438, "bwrite"},
  {0x0000000080002476, "brelse"},
  {0x0000000080002514, "bpin"},
  {0x0000000080002550, "bunpin"},
  {0x00000000800028ce, "fsinit"},
  {0x000000008000294e, "iinit"},
  {0x00000000800029ae, "ialloc"},
  {0x0000000080002a7c, "iupdate"},
  {0x0000000080002b0a, "idup"},
  {0x0000000080002b48, "ilock"},
  {0x0000000080002c0a, "iunlock"},
  {0x0000000080002c56, "itrunc"},
  {0x0000000080002d02, "iput"},
  {0x0000000080002daa, "iunlockput"},
  {0x0000000080002dd2, "stati"},
  {0x0000000080002dfc, "readi"},
  {0x0000000080002ef4, "writei"},
  {0x0000000080003012, "namecmp"},
  {0x000000008000302c, "dirlookup"},
  {0x0000000080003242, "dirlink"},
  {0x0000000080003304, "namei"},
  {0x0000000080003322, "nameiparent"},
  {0x000000008000347e, "initlog"},
  {0x0000000080003524, "begin_op"},
  {0x00000000800035a2, "end_op"},
  {0x00000000800036fa, "log_write"},
  {0x00000000800037de, "initsleeplock"},
  {0x0000000080003818, "acquiresleep"},
  {0x000000008000386e, "releasesleep"},
  {0x00000000800038b2, "holdingsleep"},
  {0x0000000080003908, "fileinit"},
  {0x0000000080003930, "filealloc"},
  {0x000000008000399a, "filedup"},
  {0x00000000800039ec, "fileclose"},
  {0x0000000080003ab4, "filestat"},
  {0x0000000080003b26, "fileread"},
  {0x0000000080003be8, "filewrite"},
  {0x0000000080003d1c, "pipealloc"},
  {0x0000000080003df6, "pipeclose"},
  {0x0000000080003e66, "pipewrite"},
  {0x0000000080003f58, "piperead"},
  {0x0000000080004040, "exec"},
  {0x00000000800045f8, "sys_dup"},
  {0x000000008000464a, "sys_read"},
  {0x00000000800046b0, "sys_write"},
  {0x0000000080004716, "sys_close"},
  {0x0000000080004764, "sys_fstat"},
  {0x00000000800047b2, "sys_link"},
  {0x00000000800048fc, "sys_unlink"},
  {0x0000000080004ace, "sys_open"},
  {0x0000000080004c66, "sys_mkdir"},
  {0x0000000080004cc6, "sys_mknod"},
  {0x0000000080004d4e, "sys_chdir"},
  {0x0000000080004df6, "sys_exec"},
  {0x0000000080004f06, "sys_pipe"},
  {0x0000000080005020, "kernelvec"},
  {0x00000000800050b0, "timervec"},
  {0x00000000800050da, "plicinit"},
  {0x00000000800050f0, "plicinithart"},
  {0x0000000080005128, "plic_claim"},
  {0x000000008000514c, "plic_complete"},
  {0x0000000080005210, "virtio_disk_init"},
  {0x0000000080005352, "virtio_disk_rw"},
  {0x00000000800055d8, "virtio_disk_intr"},
  {0x00000000800056a2, "findsym"},
  {0x0000000080005714, "timerinit"},
  {0x0000000080005784, "start"},
  {0x00000000800057f8, "consolewrite"},
  {0x000000008000585c, "consoleread"},
  {0x000000008000596e, "consputc"},
  {0x00000000800059b0, "consoleintr"},
  {0x0000000080005b42, "consoleinit"},
  {0x0000000080005c32, "printfinit"},
  {0x0000000080005c64, "backtrace"},
  {0x0000000080005ce2, "panic"},
  {0x0000000080005d34, "printf"},
  {0x0000000080005f14, "uartinit"},
  {0x0000000080005f64, "uartputc_sync"},
  {0x0000000080005fb0, "uartstart"},
  {0x0000000080006036, "uartputc"},
  {0x00000000800060ec, "uartgetc"},
  {0x0000000080006110, "uartintr"},
  {0x0000000080006160, "initlock"},
  {0x0000000080006176, "holding"},
  {0x00000000800061a4, "push_off"},
  {0x00000000800061f0, "acquire"},
  {0x0000000080006244, "pop_off"},
  {0x00000000800062a4, "release"},
  {0x0000000080007000, "_trampoline"},
  {0x0000000080007000, "trampoline"},
  {0x0000000080007000, "uservec"},
  {0x0000000080007090, "userret"},
  {0x0000000080008000, "etext"},
  {0, 0}
};

char* 
findsym(uint64 addr)
{
  int i;
  
  for(i = 0; symbols[i].addr && symbols[i+1].addr; i++) {
    if(addr >= symbols[i].addr && addr < symbols[i+1].addr)
      return symbols[i].name;
  }
  
  if(symbols[i].addr && addr >= symbols[i].addr)
    return symbols[i].name;
  
  return "unknown";
}
